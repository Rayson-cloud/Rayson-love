<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Fudarachi Raani</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap');

        body {
            margin: 0; padding: 0;
            background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #ffd1ff, #a1c4fd);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            font-family: 'Poppins', sans-serif;
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; overflow-x: hidden; text-align: center;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            padding: 30px; border-radius: 20px;
            z-index: 10; width: 90%; max-width: 600px; margin: 20px;
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .frosted {
            background: rgba(255, 255, 255, 0.88);
            backdrop-filter: blur(15px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.1), 0 0 20px rgba(214, 51, 132, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        h1 { font-family: 'Dancing Script', cursive; color: #d63384; font-size: 3rem; margin-bottom: 10px; }
        
        .floating-item { position: fixed; top: -50px; pointer-events: none; animation: fall linear infinite; z-index: 1; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

        .featured-polaroid {
            background: white; padding: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            max-width: 280px; margin: 25px auto; transform: rotate(-3deg);
            border-radius: 5px;
        }
        .featured-polaroid img { width: 100%; border-radius: 2px; }

        .grid-gallery { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 15px; 
            margin-top: 20px;
            max-height: 50vh; 
            overflow-y: auto;
            padding: 10px;
            border-radius: 10px;
        }

        .gallery-item {
            background: white; padding: 8px; border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: 0.4s; cursor: zoom-in;
        }
        .gallery-item img { width: 100%; height: 140px; object-fit: cover; border-radius: 4px; }

        /* Fullscreen Overlay */
        #overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 1000; justify-content: center; align-items: center;
        }
        #overlay img { max-width: 90%; max-height: 85%; border: 5px solid white; }

        .btn { padding: 12px 30px; border: none; border-radius: 50px; cursor: pointer; font-size: 1rem; font-weight: 600; transition: 0.3s; margin: 8px; }
        #yesBtn { background: #d63384; color: white; }
        #noBtn { background-color: #f8f9fa; color: #d63384; position: relative; }
        
        /* New Letter Button Style */
        .letter-btn {
            background: #ff758c;
            color: white;
            width: 80%;
            margin: 20px auto;
            display: block;
            box-shadow: 0 4px 15px rgba(255, 117, 140, 0.4);
        }

        .back-btn { background: rgba(85, 85, 85, 0.1); color: #555; font-size: 0.8rem; margin-top: 10px; }
        .stats-box { margin: 20px 0; font-size: 0.9rem; color: #d63384; font-weight: bold; background: rgba(255,255,255,0.4); padding: 15px; border-radius: 15px; }
        
        #secretMessage, #photoGallery { display: none; }
    </style>
</head>
<body onclick="startMusic()">

    <div id="overlay" onclick="this.style.display='none'">
        <img id="overlayImg" src="">
    </div>

    <audio id="loveSong" loop preload="auto">
        <source src="https://raw.githubusercontent.com/Rayson-cloud/Rayson-love/main/HerTania.mp3" type="audio/mpeg">
    </audio>

    <div class="container" id="mainWrapper">
        
        <div id="mainContent">
            <h1>For My Mogacho Sovnsar üçì</h1>
            <div class="featured-polaroid">
                <img src="main.jpg" alt="Tania" onerror="this.src='https://via.placeholder.com/300x400?text=main.jpg'">
            </div>
            <h3>Will you be my Valentine?</h3>
            <div style="display: flex; justify-content: center;">
                <button class="btn" id="yesBtn" onclick="revealMessage()">Yes!</button>
                <button class="btn" id="noBtn" onmouseover="moveButton()">No</button>
            </div>
        </div>

        <div id="secretMessage">
            <h1>I Love You, Tania! ‚ù§Ô∏è</h1>
            <div class="stats-box">Together for: <span id="timer">...</span></div>
            <div style="font-size: 50px; cursor: pointer;" onclick="showReason()">üè∫</div>
            <p>Forever yours, Rayson</p>
            <button class="btn" style="background:#ff758c; color:white;" onclick="showGallery()">See Our Memories üì∏</button>
        </div>

        <div id="photoGallery">
            <h1>Our Journey ‚ôæÔ∏è</h1>
            <div class="grid-gallery" id="galleryVault"></div>
            
            <button class="btn letter-btn" onclick="downloadLetter()">üíå A letter from your Man</button>
            
            <button class="btn back-btn" onclick="goBack('secret')">‚Üê Back</button>
        </div>
    </div>

    <canvas id="letterCanvas" width="800" height="1000" style="display:none;"></canvas>

    <script>
        const audio = document.getElementById('loveSong');
        let musicStarted = false;
        function startMusic() { if (!musicStarted) { audio.play().catch(()=>{}); musicStarted = true; } }

        const startDate = new Date("2025-02-04"); 
        function updateTimer() {
            const now = new Date();
            const diff = now - startDate;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const mins = Math.floor((diff / 1000 / 60) % 60);
            document.getElementById('timer').innerHTML = `${days}d ${hours}h ${mins}m`;
        }
        setInterval(updateTimer, 1000);

        // Generate Gallery
        const vault = document.getElementById('galleryVault');
        for (let i = 1; i <= 17; i++) {
            const item = document.createElement('div');
            item.className = 'gallery-item';
            item.onclick = function() {
                document.getElementById('overlayImg').src = `G${i}.jpg`;
                document.getElementById('overlay').style.display = 'flex';
            };
            item.innerHTML = `<img src="G${i}.jpg" onerror="this.src='https://via.placeholder.com/150?text=G${i}'"><p>Memory ${i}</p>`;
            vault.appendChild(item);
        }

        // NAVIGATION
        function revealMessage() {
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('secretMessage').style.display = 'block';
            document.getElementById('mainWrapper').classList.add('frosted');
        }
        function showGallery() {
            document.getElementById('secretMessage').style.display = 'none';
            document.getElementById('photoGallery').style.display = 'block';
        }
        function goBack(target) {
            document.getElementById('photoGallery').style.display = 'none';
            document.getElementById('secretMessage').style.display = target === 'secret' ? 'block' : 'none';
        }

        function moveButton() {
            const btn = document.getElementById('noBtn');
            btn.style.position = 'fixed';
            btn.style.left = Math.random() * 80 + 'vw';
            btn.style.top = Math.random() * 80 + 'vh';
        }

        // LETTER DOWNLOAD LOGIC
        function downloadLetter() {
            const canvas = document.getElementById('letterCanvas');
            const ctx = canvas.getContext('2d');

            // 1. Background
            ctx.fillStyle = "#fff9f0"; // Parchment color
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // 2. Decorative Border
            ctx.strokeStyle = "#d63384";
            ctx.lineWidth = 15;
            ctx.strokeRect(40, 40, canvas.width - 80, canvas.height - 80);

            // 3. Title
            ctx.fillStyle = "#d63384";
            ctx.font = "bold 50px 'Dancing Script', cursive";
            ctx.textAlign = "center";
            ctx.fillText("My Dearest Tania,", canvas.width/2, 150);

            // 4. Letter Content (Change this text to whatever you want!)
            ctx.fillStyle = "#333";
            ctx.font = "30px 'Poppins', sans-serif";
            ctx.textAlign = "left";
            
            const text = [
                "From the moment we started our journey on",
                "February 4th, my life has been full of color.",
                "",
                "You are my 'Fudarachi Raani', the person I",
                "want to share every laugh and memory with.",
                "Every one of these 17 photos represents a",
                "second where I felt like the luckiest man.",
                "",
                "Thank you for being my Mogacho Sovnsar.",
                "I love you more than words can ever say.",
                "",
                "Forever Yours,",
                "Rayson ‚ù§Ô∏è"
            ];

            let y = 250;
            text.forEach(line => {
                ctx.fillText(line, 100, y);
                y += 45;
            });

            // 5. Add a little heart at the bottom
            ctx.font = "60px serif";
            ctx.fillText("üåπ", canvas.width/2 - 30, 900);

            // 6. Trigger Download
            const link = document.createElement('a');
            link.download = 'Letter_From_Rayson.png';
            link.href = canvas.toDataURL("image/png");
            link.click();
            
            alert("The letter is downloading to your gallery! ‚ù§Ô∏è");
        }
    </script>
</body>
</html>
